##### Game logic functions on the server #####